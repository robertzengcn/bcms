SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `commodity`
-- ----------------------------
DROP TABLE IF EXISTS `commodity`;
CREATE TABLE `commodity` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `subject` varchar(100) NOT NULL COMMENT '商品名称',
  `quantity` int(20) NOT NULL,
  `salenum` int(20) NOT NULL DEFAULT '0' COMMENT '已销数量',
  `pic` varchar(250) DEFAULT NULL COMMENT '商品图片',
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '商品状态 1为启用，0为关闭',
  `types` int(1) NOT NULL DEFAULT '1' COMMENT '商品类型 1：医疗服务 2：医院购买  3：商城配送',
  `counts` int(8) DEFAULT NULL COMMENT '点击数',
  `model` varchar(25) NOT NULL COMMENT '商品型号',
  `exchange` int(10) DEFAULT '1' COMMENT '兑换方式：1为纯积分，2为积分加现金',
  `limit` int(1) DEFAULT '0' COMMENT '每个账户限购',
  `score` int(8) NOT NULL COMMENT '积分数量',
  `price` varchar(20) NOT NULL COMMENT '商品价格',
  `plushtime` int(11) unsigned DEFAULT NULL COMMENT '发布时间',
  `updatetime` int(11) unsigned DEFAULT NULL COMMENT '更新时间',
  `click_count` tinyint(3) unsigned DEFAULT NULL,
  `flag` text,
  `get` tinyint(1) unsigned DEFAULT NULL,
  `start_time` int(15) NOT NULL COMMENT '活动开始时间',
  `end_time` int(15) NOT NULL COMMENT '活动结束时间',
  `categories_id` int(10) DEFAULT NULL,
  `pattern` tinyint(3) unsigned DEFAULT NULL,
  `shelf` tinyint(1) unsigned DEFAULT NULL,
  `discount` int(25) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `commodity_supplier`
-- ----------------------------
DROP TABLE IF EXISTS `commodity_supplier`;
CREATE TABLE `commodity_supplier` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `product_id` int(10) NOT NULL COMMENT '商品id ',
  `source` varchar(250) NOT NULL COMMENT '来源',
  `model` varchar(50) NOT NULL COMMENT '接入商品的特殊值，用来确定唯一性',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='第三方供应商信息表';

-- ----------------------------
-- Table structure for `commoditycategories`
-- ----------------------------
DROP TABLE IF EXISTS `commoditycategories`;
CREATE TABLE `commoditycategories` (
  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT '分类id',
  `name` varchar(200) CHARACTER SET utf8 DEFAULT NULL COMMENT '分类名',
  `categories_image` varchar(200) CHARACTER SET utf8 DEFAULT NULL COMMENT '分类图片',
  `categories_status` int(10) DEFAULT '0' COMMENT '分类状态, 0为开启，1为关闭',
  `types` int(5) DEFAULT '1',
  `descript` text CHARACTER SET utf8,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='商品目录表';

-- ----------------------------
-- Table structure for `commoditydescript`
-- ----------------------------
DROP TABLE IF EXISTS `commoditydescript`;
CREATE TABLE `commoditydescript` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `product_descript` text,
  `product_id` int(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `product_id` (`product_id`),
  CONSTRAINT `commoditydescript_ibfk_1` FOREIGN KEY (`product_id`) REFERENCES `commodity` (`id`),
  CONSTRAINT `commoditydescript_ibfk_2` FOREIGN KEY (`product_id`) REFERENCES `commodity` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `consumptionlog`
-- ----------------------------
DROP TABLE IF EXISTS `consumptionlog`;
CREATE TABLE `consumptionlog` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户id',
  `score` int(15) unsigned DEFAULT '0' COMMENT '用户消费积分数',
  `cash` decimal(14,3) unsigned DEFAULT '0.000' COMMENT '用户消费现金数',
  PRIMARY KEY (`id`),
  KEY `member_id` (`uid`) USING BTREE,
  CONSTRAINT `consumptionlog_ibfk_1` FOREIGN KEY (`uid`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `counterhistory`
-- ----------------------------
DROP TABLE IF EXISTS `counterhistory`;
CREATE TABLE `counterhistory` (
  `counter_history` int(8) NOT NULL,
  `counter` int(12) NOT NULL,
  `doctor_id` int(12) NOT NULL,
  `department_id` int(12) NOT NULL,
  PRIMARY KEY (`counter_history`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `departmentmanager`
-- ----------------------------
DROP TABLE IF EXISTS `departmentmanager`;
CREATE TABLE `departmentmanager` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL COMMENT '科室名称',
  `smalldescript` varchar(250) NOT NULL,
  `fulldescript` varchar(1000) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `doctormanager`
-- ----------------------------
DROP TABLE IF EXISTS `doctormanager`;
CREATE TABLE `doctormanager` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL COMMENT '医生名称',
  `pic` varchar(200) DEFAULT NULL COMMENT '医生照片',
  `birthday` date NOT NULL COMMENT '生日',
  `gender` tinyint(1) NOT NULL DEFAULT '0' COMMENT '性别 0男 1女',
  `content` text,
  `certificate` varchar(200) DEFAULT NULL COMMENT '资格证(图片)',
  `specialty` varchar(200) DEFAULT NULL,
  `cultural` varchar(50) NOT NULL COMMENT '学历',
  `university` varchar(50) NOT NULL COMMENT '毕业院校',
  `plushtime` char(10) DEFAULT NULL,
  `click_count` int(11) DEFAULT NULL,
  `position` varchar(100) NOT NULL,
  `title` tinyint(1) unsigned DEFAULT NULL,
  `keywords` tinyint(1) unsigned DEFAULT NULL,
  `description` tinyint(1) unsigned DEFAULT NULL,
  `departmentmanager_id` int(11) unsigned DEFAULT '0',
  `fulldescript` tinytext NOT NULL,
  `department_id` tinyint(1) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `index_foreignkey_doctormanager_departmentmanager` (`departmentmanager_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `doctormangertodisease`
-- ----------------------------
DROP TABLE IF EXISTS `doctormangertodisease`;
CREATE TABLE `doctormangertodisease` (
  `id` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '自增ID',
  `doctor_id` int(11) unsigned NOT NULL,
  `disease_id` int(11) unsigned NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `member`
-- ----------------------------
DROP TABLE IF EXISTS `member`;
CREATE TABLE `member` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(10) CHARACTER SET utf8 NOT NULL,
  `telephone` varchar(11) CHARACTER SET utf8 DEFAULT NULL,
  `ownscore` int(11) unsigned DEFAULT '0' COMMENT '已消费积分',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `memberlog`
-- ----------------------------
DROP TABLE IF EXISTS `memberlog`;
CREATE TABLE `memberlog` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL,
  `last_log` int(10) DEFAULT NULL COMMENT '最后登陆时间',
  PRIMARY KEY (`id`),
  KEY `uid_log` (`uid`) USING BTREE,
  CONSTRAINT `memberlog_ibfk_1` FOREIGN KEY (`uid`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `memberscorelog`
-- ----------------------------
DROP TABLE IF EXISTS `memberscorelog`;
CREATE TABLE `memberscorelog` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL,
  `type` int(10) NOT NULL,
  `score` int(10) DEFAULT '0' COMMENT '获得积分数量',
  `date` int(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `member_id` (`uid`) USING BTREE,
  KEY `score_type` (`type`) USING BTREE,
  CONSTRAINT `memberscorelog_ibfk_1` FOREIGN KEY (`uid`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `memberscorelog_ibfk_2` FOREIGN KEY (`type`) REFERENCES `scoretitle` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `draw`
-- ----------------------------
DROP TABLE IF EXISTS `draw`;
CREATE TABLE `draw` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) CHARACTER SET utf8 DEFAULT NULL COMMENT '活动名称',
  `start_time` int(10) NOT NULL COMMENT '活动开始时间',
  `end_time` int(10) NOT NULL COMMENT '活动结束时间',
  `statu` int(1) NOT NULL DEFAULT '0' COMMENT '活动是否开启，0为关闭，1为开启',
  `type` int(1) NOT NULL DEFAULT '1' COMMENT '活动的类型:1为转盘，2为刮卡，3为转盘',
  `limit` int(2) NOT NULL DEFAULT '0' COMMENT '每个账号限制，0为不限制，1为限制一次',
  `descript` mediumtext CHARACTER SET utf8 COMMENT '跪着说明',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `prize`
-- ----------------------------
DROP TABLE IF EXISTS `prize`;
CREATE TABLE `prize` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) CHARACTER SET utf8 DEFAULT NULL,
  `prize_count` int(15) NOT NULL DEFAULT '0' COMMENT '奖品总数',
  `prize_every` int(15) NOT NULL DEFAULT '0',
  `prize_percent` float(11,0) DEFAULT NULL,
  `prize_position` int(5) unsigned DEFAULT NULL,
  `drawid` int(10) NOT NULL COMMENT '活动id',
  `img` varchar(150) CHARACTER SET utf8 DEFAULT NULL COMMENT '奖品图片地址',
  `takeway` int(2) DEFAULT '1' COMMENT '奖品领取方式, 1为到院领取，2为医院配送',
  `type` int(2) DEFAULT NULL COMMENT '奖品类型 1为医院服务类型 2为商品',
  PRIMARY KEY (`id`),
  KEY `draw_id` (`drawid`),
  CONSTRAINT `draw_id` FOREIGN KEY (`drawid`) REFERENCES `draw` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=37 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `resertemplate`
-- ----------------------------
DROP TABLE IF EXISTS `resertemplate`;
CREATE TABLE `resertemplate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(50) NOT NULL,
  `department_id` int(11) NOT NULL,
  `type` int(11) NOT NULL COMMENT '单周1 双周2 按月3',
  `plushtime` varchar(10) NOT NULL COMMENT '发布时间',
  `morning_time` varchar(30) DEFAULT NULL COMMENT '早上时间',
  `afternoon_time` varchar(30) DEFAULT NULL COMMENT '下午时间',
  `night_time` varchar(30) DEFAULT NULL COMMENT '晚上时间',
  `moning_time` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=434 DEFAULT CHARSET=utf8 COMMENT='预约模板表';

-- ----------------------------
-- Table structure for `resertemplatedetail`
-- ----------------------------
DROP TABLE IF EXISTS `resertemplatedetail`;
CREATE TABLE `resertemplatedetail` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` int(11) NOT NULL,
  `morning` varchar(30) DEFAULT NULL,
  `afternoon` varchar(30) DEFAULT NULL,
  `night` varchar(30) DEFAULT NULL,
  `type` int(11) NOT NULL,
  `doctor_num` varchar(255) NOT NULL,
  `tem_id` int(11) NOT NULL,
  `num` int(11) DEFAULT '0',
  `plushtime` int(11) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `getdate` (`type`,`tem_id`)
) ENGINE=MyISAM AUTO_INCREMENT=226 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `scorerule`
-- ----------------------------
DROP TABLE IF EXISTS `scorerule`;
CREATE TABLE `scorerule` (
  `id` int(25) unsigned NOT NULL AUTO_INCREMENT,
  `descript` text CHARACTER SET utf8,
  `score` int(10) DEFAULT NULL,
  `limit` int(10) DEFAULT NULL,
  `type` int(10) NOT NULL COMMENT '规则类型',
  PRIMARY KEY (`id`),
  KEY `scorerule_ibfk_1` (`type`),
  CONSTRAINT `scorerule_ibfk_1` FOREIGN KEY (`type`) REFERENCES `scoretitle` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `scoretitle`
-- ----------------------------
DROP TABLE IF EXISTS `scoretitle`;
CREATE TABLE `scoretitle` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(150) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Table structure for `winlog`
-- ----------------------------
DROP TABLE IF EXISTS `winlog`;
CREATE TABLE `winlog` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `prize_id` int(10) NOT NULL,
  `member_id` int(10) unsigned NOT NULL,
  `draw_id` int(10) NOT NULL,
  `statue` int(2) DEFAULT '0' COMMENT '状态0为未领取,1为已领取',
  `date` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `win_prize` (`prize_id`),
  KEY `win_member` (`member_id`),
  KEY `win_draw` (`draw_id`),
  CONSTRAINT `win_draw` FOREIGN KEY (`draw_id`) REFERENCES `draw` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `win_member` FOREIGN KEY (`member_id`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `win_prize` FOREIGN KEY (`prize_id`) REFERENCES `prize` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;


ALTER TABLE `ask` ADD `isdisplaytt` tinyint(1) UNSIGNED DEFAULT '0' COMMENT '是否显示，默认0，不显示';





